@using EmailApp.ViewModels;
@model SendEmailViewModel

@{
    ViewData["Title"] = "Send Email";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="container mt-5">
    <div class="card">
        <div class="card-header">
            <h3>Send Email</h3>
        </div>
        <div class="card-body">
            <form method="post" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="to">To:</label>
                    <input type="text" class="form-control" id="to" name="to" placeholder="Enter recipient email address">
                </div>
                <div class="form-group">
                    <label for="cc">Cc:</label>
                    <input type="text" class="form-control" id="cc" name="cc" placeholder="Enter cc email addresses (separated by commas)">
                </div>
                <div class="form-group">
                    <label for="bcc">Bcc:</label>
                    <input type="text" class="form-control" id="bcc" name="bcc" placeholder="Enter bcc email addresses (separated by commas)">
                </div>
                <div class="form-group">
                    <label for="subject">Subject:</label>
                    <input type="text" class="form-control" id="subject" name="subject" placeholder="Enter email subject">
                </div>
                <div class="form-group">
                    <label for="body">Body:</label>
                    <textarea id="body" rows="20" name="body" class="form-control"></textarea>
                </div>
                <div class="form-group">
                    <label for="attachments">Attachments:</label>
                    <input type="file" class="form-control-file" id="attachments" name="attachments">
                </div>
                <button type="submit" class="btn btn-primary">Send Email</button>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.ckeditor.com/ckeditor5/31.0.0/classic/ckeditor.js"></script>
    <script>
        ClassicEditor
            .create(document.querySelector('#body'), {
                toolbar: ['heading', '|', 'bold', 'italic', 'link', 'bulletedList', 'numberedList', 'blockQuote'],
                placeholder: 'Type your email body here...',
                ckfinder: {
                    uploadUrl: '@Url.Action("UploadCKEditorImage", "Email")',
                    headers: {
                        'X-CSRF-TOKEN': $('input[name="__RequestVerificationToken"]').val()
                    }
                }
            })
            .catch(error => {
                console.error(error);
            });
    </script>
}
